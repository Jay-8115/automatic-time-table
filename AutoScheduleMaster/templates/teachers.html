{% extends 'layout.html' %}

{% block title %}Teachers Management{% endblock %}

{% block page_title %}Teachers Management{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-5 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-plus-circle me-2"></i>Add New Teacher</h5>
            </div>
            <div class="card-body">
                <form method="POST" action="{{ url_for('teachers') }}">
                    {{ form.hidden_tag() }}
                    <div class="mb-3">
                        {{ form.name.label(class="form-label") }}
                        {{ form.name(class="form-control", placeholder="Enter teacher name") }}
                        {% if form.name.errors %}
                            <div class="invalid-feedback d-block">
                                {% for error in form.name.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        {{ form.email.label(class="form-label") }}
                        {{ form.email(class="form-control", placeholder="Enter email address") }}
                        {% if form.email.errors %}
                            <div class="invalid-feedback d-block">
                                {% for error in form.email.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        {{ form.department.label(class="form-label") }}
                        {{ form.department(class="form-control", placeholder="Enter department") }}
                        {% if form.department.errors %}
                            <div class="invalid-feedback d-block">
                                {% for error in form.department.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    {{ form.submit(class="btn btn-primary") }}
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-7">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-chalkboard-teacher me-2"></i>Teachers</h5>
            </div>
            <div class="card-body">
                {% if teachers %}
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Department</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for teacher in teachers %}
                                    <tr>
                                        <td>{{ teacher.id }}</td>
                                        <td>{{ teacher.name }}</td>
                                        <td>{{ teacher.email or '-' }}</td>
                                        <td>{{ teacher.department or '-' }}</td>
                                        <td>
                                            <form id="delete-teacher-form-{{ teacher.id }}" 
                                                  action="{{ url_for('delete_teacher', teacher_id=teacher.id) }}" 
                                                  method="POST" class="d-inline">
                                                <button type="button" class="btn btn-sm btn-danger" 
                                                        onclick="confirmDelete('delete-teacher-form-{{ teacher.id }}', 'teacher')">
                                                    <i class="fas fa-trash"></i> Delete
                                                </button>
                                            </form>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <div class="alert alert-info" role="alert">
                        No teachers added yet. Add a teacher using the form.
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
